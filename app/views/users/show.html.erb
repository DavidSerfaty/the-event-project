<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar position-fixed h-100 pt-3">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="home"></span>
              Profil Utilisateur <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file"></span>
              Événements Admin
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="shopping-cart"></span>
              Événements invités
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h2>Profil utilisateur</h1>
      </div>
      <div class="mb-5">
        <p><strong>Email :</strong> <%= @user.email %></p>
        <p><strong>Prénom :</strong> <%= @user.first_name %></p>
        <p><strong>Nom :</strong> <%= @user.last_name %></p>
        <p><strong>Description :</strong> <%= @user.description %></p>
        <%= link_to 'Modifier', edit_user_path(@user) %> |
        <%= link_to 'Modifier mot de passe', edit_user_registration_path %>
      </div>

      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2">
        <h2>Événements Admin</h1>
      </div>
      <div class="table-responsive mb-5">
        <table class="table">
          <thead class="thead-dark">
            <tr>
              <th>Date</th>
              <th>Titre</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <% @user.events.each do |event| %>
          <tbody>
            <tr>
              <td><%= event.start_date.strftime("%d/%m/%Y") %></td>
              <td><%= event.title %></td>
              <% if event.accepted? %>
                <td><span class="badge badge-success"><%= event.status %></span></td>
              <% elsif event.pending? %>
                <td><span class="badge badge-warning"><%= event.status %></span></td>
              <% else %>
                <td><span class="badge badge-danger"><%= event.status %></span></td>
              <% end %>
              <td>
                <%= link_to 'Voir', event, class: "btn btn-sm btn-outline-primary" %>
                <%= link_to 'Modifier', edit_event_path(event), class: "btn btn-sm btn-outline-warning" %>
                <%= link_to 'Supprimer', event, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-outline-danger" %>
              </td>
            </tr>
          </tbody>
          <% end %>
        </table>
      </div>

      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2">
        <h2>Événements auxquels je participe</h1>
      </div>
      <div class="table-responsive">
        <table class="table">
          <thead class="thead-dark">
            <tr>
              <th>Date</th>
              <th>Titre</th>
              <th>Prix</th>
              <th>Actions</th>
            </tr>
          </thead>
          <% @user.attended_events.each do |event| %>
          <tbody>
            <tr>
              <td><%= event.start_date.strftime("%d/%m/%Y") %></td>
              <td><%= event.title %></td>
              <td><%= event.price %> €</td>
              <td>
                <%= link_to 'Voir', event, class: "btn btn-sm btn-outline-primary" %>
                <%= link_to 'Ne plus participer', event_attendance_path(event.id, current_user.id), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-outline-danger" %>
              </td>
            </tr>
          </tbody>
          <% end %>
        </table>
      </div>
    </main>
  </div>
</div>
